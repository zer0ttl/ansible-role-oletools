---
# tasks file for ansible-role-oletools
- name: Load var files
  ansible.builtin.include_vars: "{{ lookup('first_found', params) }}"
  vars:
    params:
      files:
        - "{{ ansible_distribution }}.yml"
        - "{{ ansible_os_family }}.yml"
        - main.yml
      paths:
        - "{{ role_path }}/vars"
  tags:
    - "{{ role_tags }}"

- name: Install python3 and pip
  ansible.builtin.apt:
    name: "{{ packages }}"
    update_cache: true
  become: true
  tags:
    - "{{ role_tags }}"

- name: Install oletools python package
  ansible.builtin.pip:
    name: "{{ pip_packages }}"
  tags:
    - "{{ role_tags }}"

- name: Clone the dd-suite
  ansible.builtin.git:
    repo: "{{ repo }}"
    dest: "{{ destination_folder }}"
    recursive: true
    version: master
  tags:
    - "{{ role_tags }}"

- name: "Debug environment variable: HOME"
  ansible.builtin.debug:
    msg: "{{ role_tags }} : {{ role_name }} : {{ ansible_distribution }} : {{ ansible_os_family }}"
  when: print_debug
  tags:
    - "{{ role_tags }}"
